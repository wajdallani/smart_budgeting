<aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
  {% if not navbar_full %}
  <div class="app-brand demo">
    <a href="{% url 'index' %}" class="app-brand-link">
      <span class="app-brand-logo demo">
        {% include 'partials/logo.html' %}
      </span>
      <span class="app-brand-text demo menu-text fw-bold ms-2">
        {% get_theme_variables 'template_name' %}
      </span>
    </a>

    <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
      <i class="icon-base bx bx-chevron-left icon-sm d-flex align-items-center justify-content-center"></i>
    </a>
  </div>
  {% endif %}

  <div class="menu-inner-shadow"></div>

  <ul class="menu-inner py-1">

    {# =================================== #}
    {#           ADMIN SIDEBAR            #}
    {# =================================== #}
    {% if user.is_superuser or user.is_staff %}

      <!-- Gestion utilisateurs -->
      <li class="menu-item {% if 'user/user' in request.path %}active open{% endif %}">
        <a href="javascript:void(0);" class="menu-link menu-toggle">
          <i class="menu-icon tf-icons bx bx-group"></i>
          <div data-i18n="Gestion Utilisateurs">Gérer Utilisateurs</div>
        </a>
        <ul class="menu-sub">
          <li class="menu-item {% if 'user/user/add' in request.path %}active{% endif %}">
            <a href="{% url 'admin:userApp_user_add' %}" class="menu-link">
              <i class="bx bx-plus-circle"></i>
              <div data-i18n="Ajouter utilisateur">Ajouter un utilisateur</div>
            </a>
          </li>
          <li class="menu-item {% if 'user/user' in request.path and 'add' not in request.path %}active{% endif %}">
            <a href="{% url 'admin:userApp_user_changelist' %}" class="menu-link">
              <i class="bx bx-list-ul"></i>
              <div data-i18n="Liste utilisateurs">Liste des utilisateurs</div>
            </a>
          </li>
        </ul>
      </li>

      <!-- Gestion groupes -->
      <li class="menu-item {% if 'auth/group' in request.path %}active open{% endif %}">
        <a href="javascript:void(0);" class="menu-link menu-toggle">
          <i class="menu-icon tf-icons bx bx-shield"></i>
          <div data-i18n="Gestion Groupes">Gérer Groupes</div>
        </a>
        <ul class="menu-sub">
          <li class="menu-item {% if 'auth/group/add' in request.path %}active{% endif %}">
            <a href="{% url 'admin:auth_group_add' %}" class="menu-link">
              <i class="bx bx-plus-circle"></i>
              <div data-i18n="Ajouter groupe">Ajouter un groupe</div>
            </a>
          </li>
          <li class="menu-item {% if 'auth/group' in request.path and 'add' not in request.path %}active{% endif %}">
            <a href="{% url 'admin:auth_group_changelist' %}" class="menu-link">
              <i class="bx bx-list-ul"></i>
              <div data-i18n="Liste groupes">Liste des groupes</div>
            </a>
          </li>
        </ul>
      </li>

      <!-- Gestion catégories -->
      <li class="menu-item {% if '/categorie/' in request.path %}active open{% endif %}">
        <a href="javascript:void(0);" class="menu-link menu-toggle">
          <i class="menu-icon tf-icons bx bx-category"></i>
          <div data-i18n="Gestion Catégories">Gérer Catégories</div>
        </a>
        <ul class="menu-sub">
          <li class="menu-item">
            <a href="{% url 'categorieApp:ajouter_categorie' %}" class="menu-link">
              <i class="bx bx-plus-circle"></i>
              <div data-i18n="Ajouter catégorie">Ajouter une catégorie</div>
            </a>
          </li>
          <li class="menu-item">
            <a href="{% url 'categorieApp:liste_categories' %}" class="menu-link">
              <i class="bx bx-list-ul"></i>
              <div data-i18n="Liste catégories">Liste des catégories</div>
            </a>
          </li>
        </ul>
      </li>

    {% else %}

      {# =================================== #}
      {#           NORMAL USER MENU         #}
      {# =================================== #}

      <!-- Revenus -->
      <li class="menu-item {% if '/revenue/' in request.path %}active{% endif %}">
        <a href="{% url 'revenue_list' %}" class="menu-link">
          <i class="menu-icon icon-base bx bx-money"></i>
          <div class="text-truncate">Revenus</div>
        </a>
      </li>

      <!-- Dépenses -->
      <li class="menu-item {% if '/depense/' in request.path %}active{% endif %}">
        <a href="{% url 'depense_list' %}" class="menu-link">
          <i class="menu-icon icon-base bx bx-credit-card"></i>
          <div class="text-truncate">Dépenses</div>
        </a>
      </li>

      <!-- Catégories (dropdown) -->
      <!-- Catégories (Dropdown simple et propre) -->
      <li class="menu-item {% if '/categorie/' in request.path %}active open{% endif %}">
        <a href="javascript:void(0);" class="menu-link menu-toggle">
          <i class="menu-icon tf-icons bx bx-category"></i>
          <div class="text-truncate">Catégories</div>
        </a>

        <ul class="menu-sub">

    <!-- Toutes les catégories -->
    <li class="menu-item {% if '/categorie/liste' in request.path %}active{% endif %}">
      <a href="{% url 'categorieApp:liste_categories' %}" class="menu-link">
        <i class="bx bx-list-ul"></i>
        <div class="text-truncate">Toutes les catégories</div>
      </a>
    </li>

    <!-- Mes catégories -->
    <li class="menu-item {% if '/categorie/mes' in request.path %}active{% endif %}">
      <a href="{% url 'categorieApp:mes_categories' %}" class="menu-link">
        <i class="bx bx-user"></i>
        <div class="text-truncate">Mes catégories</div>
      </a>
    </li>

  </ul>
</li>


      <!-- Dettes -->
      <li class="menu-item {% if '/dette/' in request.path %}active{% endif %}">
        <a href="#" class="menu-link">
          <i class="menu-icon icon-base bx bx-receipt"></i>
          <div class="text-truncate">Dettes</div>
        </a>
      </li>

      <!-- Épargne -->
      <li class="menu-item {% if '/objectifs_epargne/' in request.path or '/epargne/' in request.path %}active{% endif %}">
        <a href="{% url 'listEpargne' %}" class="menu-link">
          <i class="menu-icon tf-icons bx bx-money-bag"></i>
          <div class="text-truncate">Épargne</div>
        </a>
      </li>

      <!-- Groupes -->
      <li class="menu-item {% if '/group/' in request.path %}active{% endif %}">
        <a href="#" class="menu-link">
          <i class="menu-icon icon-base bx bx-group"></i>
          <div class="text-truncate">Groupes</div>
        </a>
      </li>

    {% endif %}

  </ul>
</aside>
