{% extends "layout/layout_blank.html" %}
{% load static i18n %}

{% block title %}Login Admin{% endblock %}

{% block page_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static  'vendor/css/pages/page-auth.css' %}">
{% endblock page_css %}

{% block content %}
  <div class="container-xxl">
    <div class="authentication-wrapper authentication-basic container-p-y">
      <div class="authentication-inner">
        <div class="card px-sm-6 px-0">
          <div class="card-body">
            <!-- Logo -->
            <div class="app-brand justify-content-center">
              <a href="{% url 'index' %}" class="app-brand-link gap-2">
                <span class="app-brand-logo demo">{% include 'partials/logo.html' %}</span>
                <span class="app-brand-text demo text-heading fw-bold">
                  {% get_theme_variables 'template_name' %}
                </span>
              </a>
            </div>
            <!-- /Logo -->

            <h4 class="mb-1">Admin login </h4>
            <p class="mb-6">Connectez-vous avec un compte staff.</p>

            {% if form.errors %}
              <div class="alert alert-danger">
                Identifiants invalides.
              </div>
            {% endif %}

           <form id="formAuthentication" class="mb-6" method="post" action="{{ app_path }}">
  {% csrf_token %}

  <!-- Identifiant -->
  <div class="mb-6">
    <label for="{{ form.username.id_for_label }}" class="form-label">Email</label>
    <input type="text"
           id="{{ form.username.id_for_label }}"
           name="{{ form.username.html_name }}"
           value="{{ form.username.value|default:'' }}"
           class="form-control {% if form.username.errors %}is-invalid{% endif %}"
           required>
    {% if form.username.errors %}
      <div class="invalid-feedback d-block">
        {% for error in form.username.errors %}
          {{ error }}
        {% endfor %}
      </div>
    {% endif %}
  </div>

  <!-- Mot de passe -->
  <div class="mb-6 form-password-toggle">
    <label class="form-label" for="{{ form.password.id_for_label }}">Mot de passe</label>
    <div class="input-group input-group-merge">
      <input type="password"
             id="{{ form.password.id_for_label }}"
             name="{{ form.password.html_name }}"
             class="form-control {% if form.password.errors %}is-invalid{% endif %}"
             placeholder="路路路路路路路路路路路路"
             required>
      <span class="input-group-text cursor-pointer">
        <i class="icon-base bx bx-hide"></i>
      </span>
    </div>
    {% if form.password.errors %}
      <div class="invalid-feedback d-block mt-1">
        {% for error in form.password.errors %}
          {{ error }}
        {% endfor %}
      </div>
    {% endif %}
  </div>

  {% if next %}
    <input type="hidden" name="next" value="{{ next }}">
  {% endif %}

  <div class="mb-6">
    <button class="btn btn-primary d-grid w-100" type="submit">
      Se connecter
    </button>
  </div>
</form>

          </div>
        </div>
        <!-- /Card -->
      </div>
    </div>
  </div>
{% endblock %}

{% block page_js %}
  {{ block.super }}
  {# tu peux r茅utiliser ton JS de toggle mot de passe ici si tu veux #}
{% endblock %}
